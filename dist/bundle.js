!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n=function(){function t(t,e,r){void 0===r&&(r="medium"),this.width=t,this.height=e,this.imageSmoothingQuality=r}return t.prototype.draw=function(){return this.canvas=document.createElement("canvas"),this.context2d=this.canvas.getContext("2d"),this.setAttributes(),this},t.prototype.setAttributes=function(){this.canvas.width=this.width,this.canvas.height=this.height,this.context2d.imageSmoothingQuality=this.imageSmoothingQuality},Object.defineProperty(t.prototype,"context",{get:function(){return this.context2d},enumerable:!0,configurable:!0}),t}(),i=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=function(){function t(t,e){this.char=e,this.settings=t}return t.prototype.render=function(){var t,e,r=this.settings,o=r.fontWidth,a=r.fontHeight,s=r.fontFace,c=r.fontBlur,h=r.fontGamma,l=r.microWidth,u=r.microHeight,f=r.microPadding,d=2*f+l,p=2*f+u,y=Math.round(d/l*o),m=Math.round(p/u*a),v=new n(y,m).draw().context;v.fillStyle="#fff",v.fillRect(0,0,y,m),v.translate(y/2,m/2),v.fillStyle="#2d2d2d",v.fillRect(-o/2,-a/2,o,a),v.translate(0,a/4),v.fillStyle="#fff",v.textAlign="center",v.font=a+"px "+s;for(var g=0,b=1,x=1;g<c;b=(e=i(t=[x,x+b],2))[0],x=e[1],t)v.filter="blur("+x+"px)",v.globalAlpha=Math.pow(++g/c,h),v.fillText(this.char,0,0);document.body.appendChild(v.canvas),this.compress(v.canvas,d,p),this.updateData()},t.prototype.compress=function(t,e,r){var i=new n(e,r,"high").draw().context;i.drawImage(t,0,0,e,r),this.compressed=i},t.prototype.updateData=function(){this.pixels=this.compressed.getImageData(0,0,this.compressed.canvas.width,this.compressed.canvas.height).data,console.log(JSON.stringify(this.pixels),this.compressed.canvas.width,this.compressed.canvas.height)},t}(),a=function(t,e,r){return 4*(t*(r-1)+e-1)},s=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},h=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},l=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t},u=function(){function t(t,e){for(var r in void 0===e&&(e={}),this.settings=t,this.charPixels=e,this.test={},this.charSums={},e)this.charSums[r]=0}return t.prototype.compareChars=function(t,e,r){var n=this.settings,i=n.microPadding,o=n.microWidth;for(var s in this.charPixels)this.charSums[s]+=Math.abs(this.charPixels[s][a(2*i+o,t+i,e+i)]-r)},t.prototype.renderChar=function(t){var e=new o(this.settings,t);e.render(),this.charPixels[t]=e.pixels},t.prototype.allChars=function(){var t,e,r=this.getChars().split("");try{for(var n=c(r),i=n.next();!i.done;i=n.next()){var o=i.value;this.renderChar(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.getChars=function(){return String.fromCharCode.apply(String,l(f(32,95),f(96,127),f(161,168),f(174,178),[169,171,172,180,181,183,187,191,215,247],f(8216,8227),[8249,8250,8729,8730,8734]))},t}();function f(t,e,r){var n;return void 0===t&&(t=0),void 0===e&&(e=1/0),void 0===r&&(r=1),s(this,function(i){switch(i.label){case 0:n=t,i.label=1;case 1:return n<e?[4,n]:[3,4];case 2:i.sent(),i.label=3;case 3:return n+=r,[3,1];case 4:return[2]}})}var d=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},p=function(){function t(t,e,r){this.settings=t,this.c=e,this.ctx=e.getContext("2d"),this.image=r,this.width=this.c.width,this.height=this.c.height}return t.prototype.createChunks=function(t){for(var e=this.settings,r=e.microWidth,n=e.microHeight,i="",o=1;o+n<this.height;o+=n){for(var s="",c=1;c<this.width;c+=r){for(var h=new u(this.settings,t),l=o;l<o+n;l++)for(var f=c;f<c+r;f++){var p=a(this.width,f,l),y=this.pixels.data[p];h.compareChars(f-c+1,l-o+1,y)}s+=Object.entries(h.charSums).sort(function(t,e){return d(t,2)[1]-d(e,2)[1]})[0][0]}i+=s+"\n"}var m=document.createElement("canvas");m.getContext("2d").putImageData(this.pixels,0,0),document.body.appendChild(m),document.querySelector("pre").innerText=i},t.prototype.draw=function(){this.ctx.drawImage(this.image,0,0)},t.prototype.updateData=function(){this.data=this.ctx.getImageData(0,0,this.width,this.height)},Object.defineProperty(t.prototype,"data",{set:function(t){this.pixels=t},enumerable:!0,configurable:!0}),t}(),y=function(){this.fontFace="consolas",this.fontWidth=40,this.fontHeight=70,this.fontBlur=9,this.microWidth=5,this.microHeight=7,this.microPadding=1,this.fontGamma=1},m=document.querySelector("canvas.main-canvas"),v=document.querySelector("img"),g=new y,b=new p(g,m,v);window.onload=function(){var t=new u(g);t.allChars(),b.draw(),b.updateData(),console.log(b.createChunks(t.charPixels))}}]);